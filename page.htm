<!doctype html>
<html>
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://bootswatch.com/yeti/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
	<title>Home page</title>

</head>
<body>
<div class="container">
  <div class="row">
  <h1>Wiki <small><i class="fa fa-home"></i> . courses </small></h1>
  <hr>

<div id="maintext"></div>
</div>
</div>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="./assets/showdown.js"></script>
<script>
jQuery.extend({

  getQueryParameters : function(str) {
	  return (str || document.location.search).replace(/(^\?)/,'').split("&").map(function(n){return n = n.split("="),this[n[0]] = n[1],this}.bind({}))[0];
  }

});
</script>
<script> 
   $(function(){
	var queryParams = $.getQueryParameters();
	console.log('page to load = '+queryParams['p']);

	var converter = new Showdown.converter();

	$.get( './pages/'+queryParams['p']+".htm", function( data ) {
		
		// internal links
		data = data.replace(/\[\[(\w+)\]\]/g,"<a href=https://joelau.github.io/page.htm?p=$1>$1</a>");

		// strikethrough font
		data = data.replace(/~~(\w+)~~/g,"<strike>$1</strike>");	

		//doi:
		data = data.replace(/doi:((\w|\/|[-._;():A-Z0-9])+)/gi,'<a href=http://hdl.handle.net/$1>doi:$1</a>');
		

		html = converter.makeHtml(data);
		
		
		console.log( html );
		$('#maintext').html(html);
	});
		
    
   });

</script> 
</body>
</html> 